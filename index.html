<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>45t - L‚ÄôOmbre et Son Reflet</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            color: #e0e0e0;
            font-family: "Courier New", monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            transition: background-color 2s;
        }
        .symbol {
            font-size: 6em;
            opacity: 0.9;
            position: absolute;
            z-index: 2;
            animation: float 6s infinite alternate ease-in-out;
        }
        .message {
            font-size: 1.4em;
            margin-top: 20px;
            position: absolute;
            bottom: 10%;
            opacity: 0;
            transition: opacity 2s;
        }
        .fragment {
            position: absolute;
            color: rgba(255, 0, 0, 0.5);
            pointer-events: none;
            font-size: 2em;
            animation: drift 10s infinite alternate;
        }
        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(20px); }
        }
        @keyframes drift {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <div id="symbol" class="symbol">ìÖÉ</div>
    <div id="message" class="message"></div>

    <script>
        const symbols = ["ìÖÉ", "‚ú∂", "‚òâ", "‚ßâ", "ìè¢", "‚üÅ", "‚¶ø"];
        const messages = [
            "L'ombre t'appelle.",
            "Tu es observ√©.",
            "Pourquoi es-tu revenu ?",
            "Chaque souffle te suit.",
            "Tout se d√©t√©riore.",
            "Tu n‚Äôes pas seul.",
            "Regarde derri√®re toi..."
        ];

        const visitorInfo = {
            userAgent: navigator.userAgent,
            language: navigator.language,
            screenWidth: window.innerWidth,
            screenHeight: window.innerHeight,
            hour: new Date().getHours(),
            visits: localStorage.getItem("visits") || 0,
        };

        const symbol = document.getElementById("symbol");
        const message = document.getElementById("message");
        let chaosMemory = JSON.parse(localStorage.getItem("chaosMemory")) || [];

        visitorInfo.visits++;
        localStorage.setItem("visits", visitorInfo.visits);

        // Fonction pour r√©cup√©rer un message personnalis√©
        function getPersonalizedMessage() {
            if (visitorInfo.hour < 6 || visitorInfo.hour > 20) return "La nuit t'observe.";
            if (visitorInfo.language.includes("fr")) return "Les murmures sont en toi.";
            return "Les ombres ne mentent pas.";
        }

        function triggerChaos() {
            const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            const personalizedMessage = getPersonalizedMessage();

            symbol.textContent = randomSymbol;
            symbol.style.transform = `rotate(${Math.random() * 360}deg) scale(${1 + Math.random() * 0.5})`;
            document.body.style.backgroundColor = `rgb(${Math.random() * 50}, ${Math.random() * 50}, ${Math.random() * 50})`;

            message.textContent = (visitorInfo.visits > 5) ? personalizedMessage : randomMessage;
            message.style.opacity = 1;

            setTimeout(() => message.style.opacity = 0, 4000);

            chaosMemory.push({ symbol: randomSymbol, message: randomMessage, time: new Date().toLocaleTimeString() });
            localStorage.setItem("chaosMemory", JSON.stringify(chaosMemory));

            addFragments();
            console.log("Souvenirs du chaos :", chaosMemory);
        }

        function addFragments() {
            const fragment = document.createElement("div");
            fragment.className = "fragment";
            fragment.textContent = symbols[Math.floor(Math.random() * symbols.length)];
            fragment.style.left = `${Math.random() * window.innerWidth}px`;
            fragment.style.top = `${Math.random() * window.innerHeight}px`;
            document.body.appendChild(fragment);
        }

        // D√©clenche des parasites visuels et sonores
        setInterval(triggerChaos, 5000);

        // Interaction principale
        symbol.addEventListener("click", triggerChaos);

        // Message d‚Äôinactivit√©
        setTimeout(() => {
            message.textContent = "Pourquoi ce silence ?";
            message.style.opacity = 1;
        }, 30000);
    </script>
</body>
</html>
